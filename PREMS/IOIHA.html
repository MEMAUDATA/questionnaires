<!DOCTYPE html>
<html lang="fr">
  <head>
     <!-- Author's details-->
     <meta name="author" content="Nicolas Vannson">
     <meta name="contact" content="hello@memau.eu">
     <meta name="license" content="EUPLv1.2">
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.0/jspdf.umd.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
     <link rel="stylesheet" href="/style.css">
     <style>
       /* style is within the style.css sheet */
     </style>
    <title>IIPBAA</title>
  </head>
  <body>
    <h1>Inventaire international portant sur les bénéfices des aides auditives <br> (IIPBAA ou IOI-HA en anglais)</h1>
    <p >Cox et al., 2000 (version originale)<br>
    Cox,Stephens & Kramer 2002 (version traduite en français)</p>
    <br>
    <form id="IIPBAA">
      <table>
        <tbody>
          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>1. Durant les deux dernières semaines, si vous avez utilisé votre(vos) appareil(s) auditif(s), indiquez combien d’heures par jour en moyenne</p>
                 <br> 
               </div>
               <div class="IIPBAA_answer">
                  <label>jamais<br><input type="radio" name="q1" value="1"></label>
                  <label>moins d’une 1 heure/jour<br><input type="radio" name="q1" value="2"></label>
                  <label>1 à 4 hr/jour<br><input type="radio" name="q1" value="3"></label>
                  <label>4 à 8hr/jour<br><input type="radio" name="q1" value="4"></label>
                  <label>plus de 8 hr/jour<br><input type="radio" name="q1" value="5"></label>
                </div>
            </td>
          </tr>

          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>2. Souvenez-vous des situations dans lesquelles vous aviez le plus envie d’entendre mieux avant d’avoir votre appareillage auditif. Durant les deux dernières semaines, votre appareillage vous a-t-il aidé dans
                  ces situations?</p>
              </div>  
                <br> 
               <div class="IIPBAA_answer">
                  <label>Jamais aidé<br><input type="radio" name="q2" value="1"></label>
                  <label>Légèrement aidé<br><input type="radio" name="q2" value="2"></label>
                  <label>Modérément aidé<br><input type="radio" name="q2" value="3"></label>
                  <label>Nettement aidé<br><input type="radio" name="q2" value="4"></label>
                  <label>Beaucoup aidé<br><input type="radio" name="q2" value="5"></label>
                </div>
            </td>
          </tr>

          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>3. Souvenez-vous des situations dans lesquelles vous aviez le plus envie d’entendre mieux. Quand vous utilisez maintenant votre appareillage auditif, avez-vous ENCORE des difficultés ?</p>
                </div>
                <br>
               <div class="IIPBAA_answer">
                  <label>Beaucoup difficultés<br><input type="radio" name="q3" value="1"></label>
                  <label>Nettes difficultés<br><input type="radio" name="q3" value="2"></label>
                  <label>Difficultés modérées<br><input type="radio" name="q3" value="3"></label>
                  <label>Légères difficultés<br><input type="radio" name="q3" value="4"></label>
                  <label>Aucune difficulté<br><input type="radio" name="q3" value="5"></label>
                </div>
            </td>
          </tr>

          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>4. Tout compte fait, pensez-vous que votre appareillage auditif actuel présente un intérêt?</p>
              </div>
              <br>
               <div class="IIPBAA_answer">
                  <label>Aucun intérêt<br><input type="radio" name="q4" value="1"></label>
                  <label>Un léger intérêt<br><input type="radio" name="q4" value="2"></label>
                  <label>Un intérêt modéré<br><input type="radio" name="q4" value="3"></label>
                  <label>Un net intérêt<br><input type="radio" name="q4" value="4"></label>
                  <label>Un grand intérêt<br><input type="radio" name="q4" value="5"></label>
                </div>
            </td>
          </tr>

          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>5. Durant les deux dernières semaines, avec votre appareillage auditif actuel, à quel point vos difficultés auditives ont-elles gêné ou affecté les choses que vous pouvez faire?</p>
              </div>
              <br>  
               <div class="IIPBAA_answer">
                  <label>Beaucoup gêné<br><input type="radio" name="q5" value="1"></label>
                  <label>Nettement gêné<br><input type="radio" name="q5" value="2"></label>
                  <label>Modérément gêné<br><input type="radio" name="q5" value="3"></label>
                  <label>Légèrement gêné<br><input type="radio" name="q5" value="4"></label>
                  <label>Pas du tout gêné<br><input type="radio" name="q5" value="5"></label>
                </div>
            </td>
          </tr>


          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>6. Durant les deux dernières semaines, avec votre appareillage auditif actuel, à quel point pensez-vous que vos difficultés auditives ont ennuyé les autres?</p>
              </div>
              <br>
               <div class="IIPBAA_answer">
                  <label>Beaucoup ennuyé<br><input type="radio" name="q6" value="1"></label>
                  <label>Nettement ennuyé<br><input type="radio" name="q6" value="2"></label>
                  <label>Modérément ennuyé<br><input type="radio" name="q6" value="3"></label>
                  <label>Beaucoup ennuyé<br><input type="radio" name="q6" value="4"></label>
                  <label>Pas du tout ennuyé<br><input type="radio" name="q6" value="5"></label>
                </div>
            </td>
          </tr>
          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>7. Tout compte fait, votre vie et ses plaisisrs ont-ils changé depuis votre appareillage auditif ?</p>
              </div>
              <br>
               <div class="IIPBAA_answer">
                  <label>Pire qu’avant<br><input type="radio" name="q7" value="1"></label>
                  <label>Pas de changement<br><input type="radio" name="q7" value="2"></label>
                  <label>Légèrement mieux<br><input type="radio" name="q7" value="3"></label>
                  <label>Nettement mieux<br><input type="radio" name="q7" value="4"></label>
                  <label>Beaucoup mieux<br><input type="radio" name="q7" value="5"></label>
                </div>
            </td>
          </tr>

          <tr>
            <td>
              <div class="IIPBAA_question">
                <p>8. Quel est votre niveau de perte auditive lorsque vous <b>ne</b> portez <b>pas</b> votre appareillage auditif ?</p>
              </div>
              <br>    
               <div class="IIPBAA_answer">
                  <label>Profonde<br><input type="radio" name="q8" value="1"></label>
                  <label>Sévère<br><input type="radio" name="q8" value="2"></label>
                  <label>Moyenne<br><input type="radio" name="q8" value="3"></label>
                  <label>Légère<br><input type="radio" name="q8" value="4"></label>
                  <label>Aucune<br><input type="radio" name="q8" value="5"></label>
                </div>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="buttons-container">
        <button type="button" onclick="calculerScores()">Calculer les scores</button>
        <button type="reset" onclick="resetForm()">Réinitialiser</button>
      </div>
    </form>
    <div id="results"></div>
    <script>
      function calculerScores() {
        let allAnswered = true;
        let use = 0;
        let ben = 0;
        let ral = 0;
        let sat = 0;
        let rpr = 0;
        let iot = 0;
        let qol = 0;
        let perte = 0;
        let n_use = 0;
        let n_ben = 0;
        let n_ral = 0;
        let n_sat = 0;
        let n_rpr = 0;
        let n_iot = 0;
        let n_qol = 0;

       

      for (let i = 1; i <= 8; i++) {
        let q = document.querySelector(`input[name="q${i}"]:checked`);
        if (!q) { // Check if a radio button for the current question is not checked
          allAnswered = false;
          break; // Exit the loop early if a question is unanswered
        }

        const resp = document.getElementById("IIPBAA");

        use = parseInt(resp.elements["q1"].value);
        ben = parseInt(resp.elements["q2"].value);
        ral = parseInt(resp.elements["q3"].value);
        sat = parseInt(resp.elements["q4"].value);
        rpr = parseInt(resp.elements["q5"].value);
        iot = parseInt(resp.elements["q6"].value);
        qol = parseInt(resp.elements["q7"].value);
        perte = parseInt(resp.elements["q8"].value);

        // Calculate n_use based on perte
        if (perte >= 3) {
          n_use = 3;
          n_ben = 3;
          n_ral = 3;
          n_sat = 2;
          n_rpr = 3;
          n_iot = 3;
          n_qol = 3;


        } else {
          n_use = 4;
          n_ben = 3;
          n_ral = 2;
          n_sat = 3;
          n_rpr = 3;
          n_iot = 2;
          n_qol = 3;

        } } // end for loop

        if (allAnswered) {
          displayscores(use, ben, ral, sat, rpr, iot, qol, n_use,n_ben,n_ral,n_sat,n_rpr,n_iot,n_qol); 
        } else {
          // Display a message to the user that not all questions have been answered
          const resultDiv = document.getElementById("results"); 
          resultDiv.innerHTML = "<p class=Error_message_not_all_answered>Veuillez répondre svp à toutes les questions avant de calculer le score!</p>";
          resultDiv.style.display = "block"; 
        }

      } // end calculerScores function

      function displayscores(use, ben, ral, sat, rpr, iot, qol, n_use,n_ben,n_ral,n_sat,n_rpr,n_iot,n_qol){

        let display = "<p>Résultats</p>";
        display += "<br>"; 
        display += "<ul class='myList'>"; 
        display += "<li>Temps de port : " + use + " (norme: " + n_use + ")" +  "</li>";
        display += "<li>Bénéfice de l’appareillage auditif : " + ben + " (norme: " + n_ben + ")" + "</li>";
        display += "<li>Limitations résiduelles : " + ral + " (norme: " + n_ral + ")" + "</li>";
        display += "<li>Niveau de satisfaction : " + sat + " (norme: " + n_sat + ")" + "</li>";
        display += "<li>Restrictions résiduelles : " + rpr + " (norme: " + n_rpr + ")" +"</li>";
        display += "<li>Impact de l’appareillage sur les autres : " + iot + " (norme: " + n_iot + ")" + "</li>";
        display += "<li>Niveau de qualité de vie : " + qol + " (norme: " + n_qol + ")" + "</li>";
        display += "</ul>";
        display += "<br>";
        display = "<p>Les scores en deçà de la norme sont</p>"; 


        document.getElementById("results").innerHTML = display;
        document.getElementById("results").style.display = "block";
      }

      function resetForm() {
        document.getElementById("IIPBAA").reset();
        document.getElementById("results").innerHTML = "";
        document.getElementById("results").style.display = "none";
      }
    </script>
  </body>
</html>

