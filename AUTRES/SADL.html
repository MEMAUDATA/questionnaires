<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- Author's details-->
    <meta name="author" content="Nicolas Vannson">
    <meta name="contact" content="hello@memau.eu">
    <meta name="license" content="EUPLv1.2">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <style>
      /* style is within the style.css sheet */
    </style>
    <title>SADL-F</title>
  </head>
  <body>
      <h1>Questionnaire de Satisfaction concernant votre appareillage auditif<br>(SADL-F)</h1>
      <br>
      <p> Cox & Alexander, 1999 (création du questionnaire)<br>
      Cox & Alexander, 2001 (validation du questionnaire)<br>
      Hochart et al., 2019 (traduction en français) <br>
      Ferschneider et al., 2019 (version validée en français)</p>

      <p> <b>Consignes </b></p>
      <p> Vous trouverez ci-dessous des questions relatives à vos appareils auditifs. 
        Pour chaque question, veuillez cliquez le chiffre qui vous semble le plus adapté à votre situation.
         Gardez à l’esprit que vos réponses doivent refléter votre ressenti <u>sur vos appareils auditifs actuels ou ceux que vous avez porté récemment.</u> 
         Si vous n’avez qu’un seul appareil auditif, ce questionnaire s’applique également à votre situation.</p>
      <br> 
      <form id="SADL">

        <table>
          <tbody>
            <tr>
              <td>
                <div>
                  <p class="SADL_question">1. Par rapport à l'absence totale d'aide auditive, vos appareils auditifs vous aident-ils à comprendre les personnes avec lesquelles vous parlez le plus
                    souvent ?</p>
                </div>
                <div class="SADL_scale">
                  <span>0</span>
                  <span>1</span>
                  <span>2</span>
                  <span>3</span>
                  <span>4</span>
                  <span>5</span>
                  <span>6</span>
                  <span>7</span>
                </div>
                  <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q1">
                <div class="SADL_words">
                    <span >Non, pas du tout</span>
                    <span >Oui, totalement</span>
                </div>
              </td>
            </tr>
            
            <tr>
              <td>
                <div>
                  <p class="SADL_question">2. Êtes-vous contrarié(e) lorsque vos appareils auditifs captent des sons qui
                    vous empêchent de comprendre ce que vous voulez entendre ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q2">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, extrêmement</span>
                    </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">3. Êtes-vous convaincu(e) que porter des appareils auditifs était
                    nécessaire pour vous ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q3">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, tout à fait</span>
                    </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">4. Pensez-vous que votre entourage remarque davantage votre perte auditive
                    depuis que vous portez vos appareils auditifs ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q4">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, tout à fait</span>
                    </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">5. Faites-vous moins répéter depuis que vous portez vos appareils auditifs ?</p>
                </div>
                <div class="SADL_scale">
                  <span>0</span>
                  <span>1</span>
                  <span>2</span>
                  <span>3</span>
                  <span>4</span>
                  <span>5</span>
                  <span>6</span>
                  <span>7</span>
                </div>
                  <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q5">
                  <div class="SADL_words">
                    <span >Non, pas du tout</span>
                    <span >Oui, tout à fait</span>
                  </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">6. Pensez-vous que porter vos appareils auditifs en vaut la peine ?</p>
                </div>
                <div class="SADL_scale">
                  <span>0</span>
                  <span>1</span>
                  <span>2</span>
                  <span>3</span>
                  <span>4</span>
                  <span>5</span>
                  <span>6</span>
                  <span>7</span>
                </div>
                  <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q6">
                  <div class="SADL_words">
                    <span >Non, pas du tout</span>
                    <span >Oui, tout à fait</span>
                  </div>
              </td>
            </tr>


            <tr>
              <td>   
                <div>
                  <p class="SADL_question"> 7.  Êtes-vous gêné(e) par l'impossibilité d'obtenir un volume suffisant avec vos
                    appareils auditifs ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q7">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, extrêmement</span>
                    </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">8. Êtes-vous satisfait(e) de l'apparence de vos appareils auditifs ?</p>
                </div>
                <div class="SADL_scale">
                  <span>0</span>
                  <span>1</span>
                  <span>2</span>
                  <span>3</span>
                  <span>4</span>
                  <span>5</span>
                  <span>6</span>
                  <span>7</span>
                </div>
                  <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q8">
                  <div class="SADL_words">
                    <span >Non, pas du tout</span>
                    <span >Oui, tout à fait</span>
                  </div>
              </td>
            </tr>


            <tr>
              <td>   
                <div>
                  <p class="SADL_question">9. Porter vos appareils auditifs améliore-t-il votre confiance en vous ?</p>
                </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q9">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, parfaitement</span>
                    </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">10. Le son de vos appareils auditifs vous semble-il naturel ?</p>
                </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q10">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, parfaitement</span>
                    </div>
              </td>
            </tr>


            <tr>
              <td>   
                <div>
                  <p class="SADL_question">11. Vos appareils auditifs vous aident-ils avec les téléphones sans
                    amplificateurs ni haut-parleurs ? (Si vous entendez bien au téléphone sans
                    appareils auditifs, veuillez ne pas répondre à cette question)</p>
                  </div>
                    <div class="SADL_scale">
                      <span>0</span>
                      <span>1</span>
                      <span>2</span>
                      <span>3</span>
                      <span>4</span>
                      <span>5</span>
                      <span>6</span>
                      <span>7</span>
                    </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q11">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, parfaitement</span>
                    </div>
              </td>
            </tr>

            <tr>
              <td> 
                <div>
                  <p class="SADL_question">12.  À votre avis, l’audioprothésiste qui vous a adapté vos appareils auditifs
                    était-il/(elle) compétent(e) ?</p>
                  </div>
                    <div class="SADL_scale">
                      <span>0</span>
                      <span>1</span>
                      <span>2</span>
                      <span>3</span>
                      <span>4</span>
                      <span>5</span>
                      <span>6</span>
                      <span>7</span>
                    </div>
                      <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q12">
                      <div class="SADL_words">
                        <span >Non, pas du tout</span>
                        <span >Oui, tout à fait</span>
                    </div>
              </td>
            </tr>
            <tr>
              <td>
                <div>
                  <p class="SADL_question">13. Pensez-vous que porter vos appareils auditifs vous fait paraître moins
                    capable ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q13">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, tout à fait</span>
                  </div>
              </td>
            </tr>

            <tr>
              <td>
                <div>
                  <p class="SADL_question">14. Le montant de ce qui reste à votre charge lors de l’achat de vos appareils
                    auditifs vous semble-t-il raisonnable ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                    <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q14">
                    <div class="SADL_words">
                      <span >Non, pas du tout</span>
                      <span >Oui, tout à fait</span>
                  </div>
              </td>
            </tr>


            <tr>
              <td>
                <div>
                  <p class="SADL_question">15. Êtes-vous satisfait(e) de la fiabilité de vos appareils auditifs (ont-ils eu
                    besoin d’être réparés) ?</p>
                  </div>
                  <div class="SADL_scale">
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                  </div>
                  <input type="range" min="0" max="7" step="1" value="3" class="slider" id="q15">
                  <div class="SADL_words">
                    <span >Non, pas du tout</span>
                    <span >Oui, tout à fait</span>
                  </div>
              </td>
            </tr>
          </tbody>
        </table>    
        <br>
        <h3> Merci de répondre à ces questions concernant votre expérience avec les
          appareils auditifs :</h3>
        <br>  
          <table >
            <tbody>
              <tr>
                <td>
                  <div>
                    <p class="SADL_question">Depuis combien de temps portez-vous vos appareils auditifs actuels ?</p>
                  </div>
                  <div class="SADL_small_radio_input">
                    <label><input type="radio" name="anx1" value="0">Moins de 6 semaines</label>
                    <label><input type="radio" name="anx1" value="1">6 semaines à 11 mois</label>
                    <label><input type="radio" name="anx1" value="2">1 à 5 ans</label>
                    <label><input type="radio" name="anx1" value="3">Plus de 5 ans</label>
                  </div>
                </td>
                <td>
                  <div>
                    <p class="SADL_question">Depuis combien de temps êtes-vous appareillé en comptant tous les appareils auditifs que vous avez portés ?</p>
                  </div>
                  <div class="SADL_small_radio_input">
                      <label><input type="radio" name="anx2" value="0">Moins de 6 semaines</label>
                      <label><input type="radio" name="anx2" value="1">6 semaines à 11 mois</label>
                      <label><input type="radio" name="anx2" value="2">1 à 10 ans</label>
                      <label><input type="radio" name="anx2" value="3">Plus de 10 ans</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div>
                    <p class="SADL_question">Combien d’heures par jour portez-vous vos appareils auditifs ?</p>
                  </div>
                  <div class="SADL_small_radio_input">  
                      <label><input type="radio" name="anx3" value="0">Jamais</label>
                      <label><input type="radio" name="anx3" value="1">Moins d’1h par jour</label>
                      <label><input type="radio" name="anx3" value="2">Entre 1 et 4h par jour</label>
                      <label><input type="radio" name="anx3" value="3">Entre 4 et 8h par jour</label> 
                      <label><input type="radio" name="anx3" value="4">Entre 8 et 12h par jour</label>
                      <label><input type="radio" name="anx3" value="5">Plus de 12h par jour</label>
                  </div>
                </td>
              <td> 
                <div>
                  <p class="SADL_question">Quel est le niveau de votre gêne auditive en l’absence d’appareils auditifs ?</p>
                </div>
                <div class="SADL_small_radio_input">  
                    <label><input type="radio" name="anx4" value="1">Aucune</label>
                    <label><input type="radio" name="anx4" value="2">Légère</label>
                    <label><input type="radio" name="anx4" value="3">Moyenne</label>
                    <label><input type="radio" name="anx4" value="4">Importante</label>
                    <label><input type="radio" name="anx4" value="5">Très importante</label>
                </div>
              </td>
            </tr>
          </table>  

        <div class="buttons-container">
          <button type="button" onclick="calculateScore()">Calculer le Score</button>
          <button type="reset" onclick="resetForm()">Réinitialiser</button>
        </div>


      </form>
      <div id="results"></div>

    <script>

      // Sliders colors
      const sliders = document.querySelectorAll(".slider");
      sliders.forEach(function(slider) {
      slider.addEventListener("input", function () {
      const value = (this.value - this.min) / (this.max - this.min) * 100;
      this.style.background = `linear-gradient(to right, #2B176C ${value}%,  #eeeeee ${value}%)`;
      });

      // Appliquer le dégradé à l’état initial
      const initialValue = (slider.value - slider.min) / (slider.max - slider.min) * 100;
      slider.style.background = `linear-gradient(to right, #2B176C ${initialValue}%, #eeeeee ${initialValue}%)`;
    });


      function calculateScore() {
        let effet       = 0;
        let cout        = 0;
        let aspect      = 0;
        let image       = 0;
        let effetcount  = 0;
        let coutcount   = 0;
        let aspectcount = 0;
        let imagecount  = 0;
        const sliderIds = ["q1", "q2", "q3", "q4", "q5", "q6", "q7", "q8", "q9", "q10", "q11", "q12","q13","q14","q15"];

        for (let i = 0; i < sliderIds.length; i++) {
          const sliderId            = sliderIds[i];
          const questionNumber      = document.getElementById(sliderId);
          const answerValue         = parseFloat(questionNumber.value,10);

          const qNum = i + 1; // Because your sliders are "q1" through "q15"
          if ([1, 3, 5, 6, 10].includes(qNum)) {
            effet += answerValue;
            effetcount++;
          } else if ([12, 14, 15].includes(qNum)) {
            cout += answerValue;
            coutcount++;
          } else if ([2, 7, 11].includes(qNum)) {
            aspect += answerValue;
            aspectcount++;
          } else if ([4, 8, 13].includes(qNum)) {
            image += answerValue;
            imagecount++;
        } // end qNum loop
        
        // Calculate means
        const meaneffet = effetcount > 0 ? (effet / effetcount).toFixed(2) : 0;
        const meancout = coutcount > 0 ? (cout / coutcount).toFixed(2) : 0;
        const meanaspect = aspectcount > 0 ? (aspect / aspectcount).toFixed(2) : 0;
        const meanimage = imagecount > 0 ? (image / imagecount).toFixed(2) : 0;

        const total = (
                      (parseFloat(meaneffet) + 
                      parseFloat(meancout) + 
                      parseFloat(meanaspect) + 
                      parseFloat(meanimage)) / 4
                    ).toFixed(2);

        
        // Display the subscale scores
        const responses = getSelectedLabels();
        display(total,meaneffet,meancout,meanaspect,meanimage,responses);
      } // end for loop

    }// end calculateScore function

    function getSelectedLabels() {
        const questions = ["anx1", "anx2", "anx3", "anx4"];
        const responses = {};

        questions.forEach((name) => {
          const selected = document.querySelector(`input[name="${name}"]:checked`);
          const labelText = selected ? selected.parentElement.textContent.trim() : null;
          responses[name] = labelText;
        });

        return responses;
      }

      function  display(total,meaneffet,meancout,meanaspect,meanimage,responses) {

        let display = "<p>Résultats</p>";
        display += "<br>";
        display += "<p>Le score sétend de 0 à 7. Un score élevé indique un plus haut niveau de satisfaction.</p>";
        display += "<br>";
        display += "<ul class='myList'>";
        display += "<li>Score Total : " + total + "</li>"
        display += "<li>Effet positif : " + meaneffet + "</li>";
        display += "<li>Coût et service : " + meancout + "</li>";
        display += "<li>Aspects négatifs : " + meanaspect + "</li>";
        display += "<li>Image personnelle : " + meanimage + "</li>";
        display += "</ul>";
         display += "<br>";
        display += "<p>Information de l'utilisateur(trice)</p>";
        display += "<br>";
        display += "<ul class='myList'>";
        const questionsLabels = {
          anx1: "Durée de port des appareils actuels",
          anx2: "Durée totale d’appareillage",
          anx3: "Nombre d’heures de port par jour",
          anx4: "Gêne auditive sans appareils"
        };  
        for (const key in responses) {
            if (responses[key]) {
              display += `<li>${questionsLabels[key]} : ${responses[key]}</li>`;
            }
          }
          display += "</ul>";
        document.getElementById("results").innerHTML = display;
        document.getElementById("results").style.display = "block";
      }
      function resetForm() {
        document.getElementById("SADL").reset();
        document.getElementById("results").innerHTML = "";
        document.getElementById("results").style.display = "none";

         // Réinitialise le fond des sliders
         const sliders = document.querySelectorAll(".slider");
        sliders.forEach(function (slider) {
        const initialValue = (slider.value - slider.min) / (slider.max - slider.min) * 100;
        slider.style.background = `linear-gradient(to right, #2B176C ${initialValue}%, #eeeeee ${initialValue}%)`;
      });
      }
    </script>
  </body>
</html>